# ランチマップ 改善要求仕様書 v2.0

## プロジェクト概要
ランチスポットを地図上で検索・表示するWebアプリケーション
**現在の状況**: Vercel本番環境デプロイ済み (https://lunch-map.vercel.app/map)
**改善目標**: データ充実とデザイン品質向上によるサービスレベル向上

## サービス名
**ランチマップ**

## 改善要求の概要

### 1. データ充実（30店舗追加）
### 2. デザイン改善（食べログ風 + 地図中心UI）

## 技術スタック
- **フロントエンド**: React Router v7（SSR対応）
- **レンダリング方式**: Server-Side Rendering (SSR)
- **スタイリング**: Tailwind CSS
- **地図**: Leaflet + OpenStreetMap
- **データベース**: Turso Cloud (SQLite)
- **デプロイ**: Vercel
- **型定義**: TypeScript

## 改善要求詳細

### Phase 1: データ充実（30店舗追加）

#### 対象エリア
- **新宿駅周辺** (10店舗)
- **渋谷駅周辺** (10店舗)
- **池袋駅周辺** (10店舗)

#### 店舗データ要件
**実在店舗の正確な情報を使用**

##### 必須データ項目:
- **基本情報**:
  - 店舗名
  - 住所
  - 緯度・経度座標
  - 電話番号
- **営業情報**:
  - 詳細営業時間
  - 定休日
  - ランチ営業時間
- **サービス情報**:
  - 料理ジャンル
  - 価格帯（～1,000円、1,000-2,000円、2,000円～）
  - 収容人数目安
- **詳細情報**:
  - 店舗の特徴・雰囲気の説明
  - 代表的なメニューと価格
  - 写真URL（外観、内装、料理写真）

#### データ収集方針
- 手動での正確な情報入力
- 各エリアの人気店・話題店を中心に選定
- 料理ジャンルは多様性を保ちつつバランス良く配置

### Phase 2: デザイン全面改善

#### デザインコンセプト
**食べログ風 × 地図中心UI × シンプル操作**

#### 参考デザイン
- 食べログモバイルアプリのUI/UX
- 地図を主役とした直感的な操作性
- 写真を大きく見せるビジュアル重視のレイアウト

#### UI構成設計

##### 1. ヘッダーエリア
- **検索バー**: 控えめで目立たない配置、プレースホルダー「お店を検索」
- **ハンバーガーメニュー**: 右上に配置（最小限の機能のみ）

##### 2. メイン地図エリア
- **地図表示**: 画面の大部分を占める
- **マーカーデザイン**: 
  - オレンジ色のフォーク・ナイフアイコン
  - 統一サイズ（複雑な変化なし）
  - ホバー/タップ時の軽微なアニメーション
- **ジャンルフィルター**: なし（シンプル性重視）
- **現在地ボタン**: 右下に配置

##### 3. 店舗詳細表示
- **表示方式**: マーカータップ時に下部からスライドアップするカード
- **カード内容**:
  - 店舗写真（1-3枚、横スクロール可能）
  - 店舗名（大きく表示）
  - 現在地からの距離・徒歩時間
  - 料理ジャンル・価格帯（タグ表示）
  - 営業時間・現在の営業状況
  - 簡潔な店舗説明（2-3行）
  - 「詳細を見る」ボタン

##### 4. 店舗詳細ページ
- **写真ギャラリー**: 大きく表示、スワイプ可能
- **店舗情報セクション**: 
  - 基本情報（住所、電話、営業時間）
  - メニュー・価格情報
  - 店舗の特徴・雰囲気
  - アクセス情報

#### 色彩・デザインシステム

##### カラーパレット
- **プライマリ**: オレンジ系（#FF6B35 系統）
- **セカンダリ**: 暖かいグレー系
- **背景**: 白ベース（#FFFFFF）
- **テキスト**: ダークグレー（#333333）
- **アクセント**: 食べログ風の温かみのある色使い

##### フォント
- **ヘッダー**: 太めのゴシック体
- **本文**: 読みやすいゴシック体
- **価格・時間**: 数字が見やすいフォント

#### レスポンシブデザイン要件

##### スマートフォン最適化
- **片手操作**: マーカータップの容易さ
- **地図操作**: ピンチズーム、スワイプの快適性
- **店舗カード**: 親指で操作しやすいボタン配置
- **テキスト**: 小画面でも読みやすいサイズ

##### タブレット・PC対応
- **レイアウト調整**: 画面サイズに応じた最適表示
- **サイドパネル**: 大画面時の店舗詳細表示オプション

## 実装優先順位

### 最高優先度
1. **マーカーデザイン改善**: オレンジのフォーク・ナイフアイコン実装
2. **店舗カードUI**: スライドアップ式の詳細表示
3. **30店舗データ追加**: 新宿・渋谷・池袋エリア
4. **写真表示機能**: 店舗写真の美しい表示

### 高優先度
1. **色彩・デザインシステム適用**: 食べログ風の配色
2. **レスポンシブデザイン**: スマートフォン最適化
3. **地図UI改善**: 現在地ボタン、操作性向上
4. **検索バー**: 控えめなデザインに変更

### 中優先度
1. **店舗詳細ページ**: 写真ギャラリー、詳細情報表示
2. **アニメーション**: マーカーホバー、カードスライド
3. **パフォーマンス最適化**: 画像読み込み、地図描画

## 技術的実装要件

### データベース拡張
```sql
-- restaurants テーブル拡張
ALTER TABLE restaurants ADD COLUMN photos TEXT; -- JSON配列形式
ALTER TABLE restaurants ADD COLUMN features TEXT; -- 店舗特徴
ALTER TABLE restaurants ADD COLUMN popular_menu TEXT; -- 人気メニュー
ALTER TABLE restaurants ADD COLUMN access_info TEXT; -- アクセス情報
```

### UI コンポーネント設計
```
components/
├── Map/
│   ├── MapContainer.tsx      # メイン地図コンポーネント
│   ├── RestaurantMarker.tsx  # カスタムマーカー
│   └── LocationButton.tsx    # 現在地ボタン
├── Restaurant/
│   ├── RestaurantCard.tsx    # スライドアップカード
│   ├── RestaurantDetail.tsx  # 詳細ページ
│   └── PhotoGallery.tsx      # 写真ギャラリー
└── UI/
    ├── SearchBar.tsx         # 検索バー
    └── LoadingSpinner.tsx    # ローディング
```

### デザインシステム実装
```typescript
// Tailwind CSS カスタム設定
theme: {
  colors: {
    primary: '#FF6B35',
    secondary: '#F4F4F4',
    accent: '#FF8C65',
    text: '#333333'
  },
  fontFamily: {
    sans: ['Hiragino Kaku Gothic ProN', 'sans-serif']
  }
}
```

## パフォーマンス要件
- **初期表示**: 3秒以内
- **地図操作**: 60fps維持
- **画像読み込み**: 遅延読み込み実装
- **マーカー表示**: 100店舗まで快適表示

## 品質保証
- **実データ検証**: 全30店舗の情報精度確認
- **デザイン一貫性**: 全画面での統一感維持
- **ユーザビリティ**: スマートフォンでの操作性検証
- **SEO対応**: SSRによる検索エンジン最適化維持

## 成功指標
- **データ充実度**: 主要3エリアで各10店舗以上の質の高い情報
- **デザイン品質**: 食べログレベルのUI/UX実現
- **ユーザビリティ**: スマートフォンでの直感的操作
- **パフォーマンス**: 地図操作の快適性維持
- **視覚的魅力**: 写真中心の魅力的な店舗表示

## 開発上の注意点
- **シンプル性の維持**: 複雑な機能は避け、使いやすさを最優先
- **写真品質**: 高解像度で魅力的な店舗写真の確保
- **情報精度**: 実在店舗の正確で最新の情報
- **モバイルファースト**: スマートフォンでの体験を最優先に設計
- **地図中心**: 検索よりも地図操作での発見を重視